<!DOCTYPE html>
<html>
<head>
    <title>AI Career Explorer</title>
    <style>
        body {
            font-family: system-ui, sans-serif;
            margin: 0;
            padding: 0;
        }

        .chat-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 1rem;
            height: 65vh;
            min-height: 300px;
            overflow-y: auto;
            border-bottom: 1px solid #ddd;
        }

        .message {
            margin-bottom: 1rem;
            max-width: 80%;
            padding: 0.75rem 1rem;
            border-radius: 12px;
            line-height: 1.4;
        }

        .system {
            background: #f5f5f5;
            color: #333;
        }

        .ai {
            background: #eef4ff;
            color: #1a3d8f;
        }

        .user {
            background: #dff5e3;
            margin-left: auto;
            text-align: right;
        }

        .input-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 1rem;
        }

        textarea {
            width: 100%;
            height: 4rem;
        }
    </style>
</head>

<body>

<h1 style="text-align:center;">AI Career Explorer MVP</h1>

<div class="chat-container">
    {% for entry in conversation_log %}
        <div class="message {{ entry.speaker }}">
            {{ entry.content }}
        </div>
    {% endfor %}
    <div id="chat-end"></div>
</div>

<div class="input-container">
    <form method="POST">
        <textarea name="user_input" placeholder="Type your response..."></textarea>
        <br><br>
        <button type="submit">Continue</button>
    </form>
</div>

<script>
  const end = document.getElementById("chat-end");
  end?.scrollIntoView({ behavior: "smooth" });

  // Enter-to-submit behavior (Shift+Enter for newline)
  const form = document.querySelector("form");
  const textarea = form?.querySelector("textarea[name='user_input']");

  if (textarea) {
    textarea.addEventListener("keydown", function (e) {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        form.submit();
      }
    });
  }
  // Optional polish: blur textarea on submit (mobile-friendly)
  if (form && textarea) {
    form.addEventListener("submit", () => {
      textarea.blur();
    });
  }
</script>



</body>
</html>
